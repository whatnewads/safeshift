# Fixed Virtual Host Configuration for SafeShift
# This fixes the SSL certificate mismatch warnings

# HTTP Virtual Host (Port 80)
<VirtualHost *:80>
    DocumentRoot "C:/XAMPP/htdocs"
    ServerName localhost
    ServerAlias 127.0.0.1
    
    # Redirect to HTTPS (optional, uncomment if needed)
    # RewriteEngine On
    # RewriteCond %{HTTPS} off
    # RewriteRule ^(.*)$ https://%{HTTP_HOST}$1 [R=301,L]
</VirtualHost>

# HTTPS Virtual Host (Port 443)
<VirtualHost *:443>
    DocumentRoot "C:/XAMPP/htdocs"
    ServerName localhost
    ServerAlias 127.0.0.1
    ServerAdmin admin@localhost
    
    # SSL Configuration
    SSLEngine on
    SSLCertificateFile "C:/XAMPP/apache/conf/ssl.crt/server.crt"
    SSLCertificateKeyFile "C:/XAMPP/apache/conf/ssl.key/server.key"
    
    # Error and Access Logs
    ErrorLog "C:/XAMPP/apache/logs/error.log"
    TransferLog "C:/XAMPP/apache/logs/access.log"
    
    # SSL Protocol and Cipher Configuration
    SSLProtocol -all +TLSv1.2 +TLSv1.3
    SSLCipherSuite HIGH:!aNULL:!MD5
    
    # Additional SSL Options
    SSLHonorCipherOrder on
    
    # Directory Configuration
    <Directory "C:/XAMPP/htdocs">
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>
</VirtualHost>

# Instructions to implement:
# 1. Backup your current httpd-ssl.conf file
# 2. Find the VirtualHost section for www.example.com:443
# 3. Replace ServerName www.example.com:443 with ServerName localhost:443
# 4. Or add ServerAlias localhost 127.0.0.1 to the existing configuration
# 5. Restart Apache